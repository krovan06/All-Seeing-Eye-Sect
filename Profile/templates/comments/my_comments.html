{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Handjet:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'Profile/css/aplication.css' %}">
    <link rel="stylesheet" href="{% static 'Profile/css/my_aplications.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <link rel="stylesheet" href="{% static 'Profile/css/my_comments_table.css' %}">
</head>
<body>
    <canvas id="particlesCanvas"></canvas>

    <header>
        <div class="main-header-container">
            <div class="content-container">
                <a href="{% url 'news_feed' %}" class="logo">KROVAN|website</a>
                <input type="checkbox" id="check">
                <label for="check" class="icons">
                    <i class="bx bx-menu" id="menu-icon"></i>
                    <i class="bx bx-x" id="close-icon"></i>
                </label>
                <nav class="header-content navbar">
                    <a href="{% url 'news_feed' %}" class="header-text news">–ü–û–¢–û–ö –†–ï–ê–õ–¨–ù–û–°–¢–ò</a>
                    <a href="{% url 'user_profile' id=user.id %}" class="header-text brotherhood">{{ user.username|upper }}</a>
                </nav>
            </div>
        </div>
    </header>

    <h1>–ú–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h1>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>–ö –ø–æ—Å—Ç—É</th>
                    <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                    <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>  <!-- –ù–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π -->
                </tr>
            </thead>
            <tbody>
                {% if comments %}
                    {% for comment in comments %}
                    <tr>
                        <td data-label="–ö –ø–æ—Å—Ç—É">
                            <a href="{% url 'post_detail' slug=comment.post.slug %}" class="btn-link">
                                {{ comment.post.title }}
                            </a>
                        </td>
                        <td data-label="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è">{{ comment.created_at|date:"d.m.Y H:i" }}</td>
                        <td data-label="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">
    <div class="comment-container">
        {% if comment.has_replies %}
            <div id="indicator-{{ comment.id }}" class="notification-indicator">üîî</div> <!-- –ó–Ω–∞—á–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        {% endif %}
        <a href="{% url 'post_detail' slug=comment.post.slug %}#comment-{{ comment.id }}"
           class="comment-link"
           data-comment-id="{{ comment.id }}"
           data-post-slug="{{ comment.post.slug }}">
            {{ comment.body }}
        </a>
        {% if comment.has_replies %}
            <button class="mark-read-btn" data-comment-id="{{ comment.id }}">
                <i class='bx bx-check'></i> –ü—Ä–æ—á–∏—Ç–∞–Ω–æ
            </button>
        {% endif %}
    </div>
</td>
                        <td data-label="–î–µ–π—Å—Ç–≤–∏—è">  <!-- –Ø—á–µ–π–∫–∞ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π -->
                            {% if comment.user == request.user %}
                               <button class="delete-comment-btn animate__animated animate__bounceIn" data-comment-id="{{ comment.id }}"><i class='bx bx-trash'></i> –£–¥–∞–ª–∏—Ç—å</button>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="4" class="text-center">–í—ã –µ—â–µ –Ω–µ –æ—Å—Ç–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <!-- CSRF-—Ç–æ–∫–µ–Ω –¥–ª—è AJAX-–∑–∞–ø—Ä–æ—Å–æ–≤ -->
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

    <script src="{% static 'Profile/js/aplication.js' %}"></script>
</body>
</html>
